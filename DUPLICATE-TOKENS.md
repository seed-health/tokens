# Duplicate Token Issue: Radius Tokens

**Status:** ðŸ”´ Active Issue
**Discovered:** October 22, 2025
**Impact:** Token collisions in build output

---

## Problem Summary

There are **THREE** separate sets of radius tokens in Figma, causing name collisions during Style Dictionary build.

### Token Collision Warnings

```
Output name RadiusSmall was generated by:
    radius.-small   8px
    radius.small   8px

Output name RadiusMedium was generated by:
    radius.-medium   16px
    radius.medium   16px

Output name RadiusLarge was generated by:
    radius.-large   32px
    radius.large   32px
```

---

## The Three Radius Token Sets

### 1. `corner_radius/` Collection (Deprecated)

**Location:** `tokens/figma-variables.json`

```json
{
  "corner_radius": {
    "-sm": { "$value": "8px", "$type": "dimension" },
    "-md": { "$value": "16px", "$type": "dimension" },
    "-lg": { "$value": "32px", "$type": "dimension" }
  }
}
```

**Issues:**
- Leading dashes (naming violation)
- Non-semantic names (sm/md/lg)
- Literal values (not using references)

**Status:** âš ï¸ Deprecated - should be deleted

---

### 2. `radius/` Collection - Literal Values (Deprecated)

**Location:** `tokens/figma-variables.json`

```json
{
  "radius": {
    "-small": { "$value": "8px", "$type": "dimension" },
    "-medium": { "$value": "16px", "$type": "dimension" },
    "-large": { "$value": "32px", "$type": "dimension" }
  }
}
```

**Issues:**
- Leading dashes (naming violation)
- Literal values (should reference primitives)
- Collides with semantic tokens below

**Status:** âš ï¸ Deprecated - should be deleted

---

### 3. `radius/` Collection - Semantic References (âœ… Keep)

**Location:** `tokens/figma-variables.json`

```json
{
  "radius": {
    "x-small": { "$value": "{appearance.measurement.100}", "$type": "dimension" },
    "small": { "$value": "{appearance.measurement.200}", "$type": "dimension" },
    "medium": { "$value": "{appearance.measurement.400}", "$type": "dimension" },
    "large": { "$value": "{appearance.measurement.800}", "$type": "dimension" },
    "full": { "$value": "{appearance.measurement.2500}", "$type": "dimension" }
  }
}
```

**Benefits:**
- No leading dashes âœ…
- Semantic naming (x-small â†’ full) âœ…
- Uses references to primitives âœ…
- More comprehensive scale âœ…

**Status:** âœ… Keep these - this is the correct pattern

---

## Why This Causes Collisions

Style Dictionary transforms token paths into variable names:

1. **Input:** `radius/-small` â†’ **Transform:** Remove leading dash â†’ **Output:** `RadiusSmall`
2. **Input:** `radius/small` â†’ **Transform:** Capitalize â†’ **Output:** `RadiusSmall`

Both paths generate the same output name, causing a collision.

---

## Resolution Plan

### Step 1: Delete in Figma (5 min)

**Delete these variables:**

**From `corner_radius` collection:**
- `corner_radius/-sm`
- `corner_radius/-md`
- `corner_radius/-lg`

**From `radius` collection:**
- `radius/-small`
- `radius/-medium`
- `radius/-large`

**Keep these variables:**
- `radius/x-small`
- `radius/small`
- `radius/medium`
- `radius/large`
- `radius/full`

### Step 2: Update Any Consumers

Check if any components reference the deprecated tokens:
- `corner_radius/sm` (or `-sm`)
- `radius/-small`, `radius/-medium`, `radius/-large`

Replace with:
- `radius/small`
- `radius/medium`
- `radius/large`

### Step 3: Re-sync Tokens

```bash
npm run sync
```

The collision warnings should disappear.

---

## Temporary Workaround (Optional)

If you can't delete from Figma immediately, add a filter to `style-dictionary.config.mjs`:

```javascript
// In each platform's filter function:
filter: (token) => {
  if (!isValidToken(token)) return false;

  // Skip deprecated radius tokens with leading dashes
  if (token.path[0] === 'radius' || token.path[0] === 'corner_radius') {
    if (token.path[1]?.startsWith('-')) {
      return false; // Skip -small, -medium, -large, -sm, -md, -lg
    }
  }

  return true;
}
```

This filters out the problematic tokens at build time.

---

## Related Issues

This is part of the larger naming issues documented in:
- `NAMING-ISSUES-REPORT.md` - Full analysis of 167 naming problems
- `SEED-NAMING-STANDARD.md` - Proper naming conventions
- `TRANSFORM-PATCH-README.md` - Temporary JSON cleaning patch

---

## Current Status

**Date:** October 22, 2025
**Action Required:** Delete deprecated radius tokens in Figma
**Temporary Fix:** Filter applied in Style Dictionary config
**Long-term Fix:** Clean up Figma variables (part of larger naming cleanup)
